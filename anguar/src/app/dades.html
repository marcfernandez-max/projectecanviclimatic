<!--
  Plantilla: Dades
  
  Estructura:
  1. Selector de període
  2. Gràfica de tendència (línia)
  3. Gràfica comparativa (barres)
  4. Blocs explicatius "Què significa" i "Què puc fer"
-->

<div class="dades-container">
  <div class="container">
    <h1 class="page-title">Dades i Indicadors</h1>
    <p class="page-subtitle">Visualitza les dades del canvi climàtic a Barcelona i entén el seu impacte.</p>

    <!-- Selector de període -->
    <div class="period-selector">
      <button class="period-btn" 
              [class.active]="periodSelected === 'avui'"
              (click)="selectPeriod('avui')">
        Avui
      </button>
      <button class="period-btn" 
              [class.active]="periodSelected === '7dies'"
              (click)="selectPeriod('7dies')">
        7 dies
      </button>
      <button class="period-btn" 
              [class.active]="periodSelected === '30dies'"
              (click)="selectPeriod('30dies')">
        30 dies
      </button>
    </div>

    <!-- Gràfica de tendència -->
    <section class="chart-section">
      <h2 class="section-title">Tendència de qualitat de l'aire (AQI)</h2>
      <div class="chart-container">
        <div class="simple-line-chart">
          <div class="chart-bars">
            <div *ngFor="let value of tendenciaData.values; let i = index" 
                 class="bar-wrapper">
              <div class="bar" 
                   [style.height.%]="(value / 100) * 100"
                   [style.background-color]="getBarColor(value)">
                <span class="bar-value">{{ value }}</span>
              </div>
              <span class="bar-label">{{ tendenciaData.labels[i] }}</span>
            </div>
          </div>
        </div>
      </div>
      <p class="chart-note">Nota: AQI (Air Quality Index) - Valors més baixos indiquen millor qualitat de l'aire.</p>
    </section>

    <!-- Gràfica comparativa -->
    <section class="chart-section">
      <h2 class="section-title">Comparativa per temes</h2>
      <div class="chart-container">
        <div class="comparative-chart">
          <div *ngFor="let item of comparativaData.labels; let i = index" 
               class="comparative-item">
            <div class="comparative-label">{{ item }}</div>
            <div class="comparative-bar-wrapper">
              <div class="comparative-bar" 
                   [style.width.%]="comparativaData.values[i]"
                   [style.background-color]="getBarColor(comparativaData.values[i])">
                <span class="comparative-value">{{ comparativaData.values[i] }}%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Blocs explicatius -->
    <section class="explicacions-section">
      <h2 class="section-title">Què signifiquen aquestes dades?</h2>
      <div class="explicacions-grid">
        <div *ngFor="let explicacio of explicacions" class="explicacio-card">
          <h3 class="explicacio-tema">{{ explicacio.tema }}</h3>
          <div class="explicacio-content">
            <div class="explicacio-section">
              <h4>Què significa:</h4>
              <p>{{ explicacio.significa }}</p>
            </div>
            <div class="explicacio-section">
              <h4>Què puc fer:</h4>
              <p>{{ explicacio.pucFer }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

